<!DOCTYPE html>
<html lang="id">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>iconic</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
  <script src="https://cdn.jsdelivr.net/npm/lightweight-charts@4.0.0/dist/lightweight-charts.standalone.production.js"></script>
  <style>
    body {
      background-color: #f7f7f7;
      font-family: 'Segoe UI', sans-serif;
    }

    .nav-link {
      font-weight: 600;
    }

    .card-box {
      border-radius: 10px;
      padding: 20px;
      color: #fff;
      text-align: center;
      font-size: 1.2rem;
      font-weight: 600;
      height: 130px;
    }

    .card-title {
      font-size: 1rem;
      font-weight: 500;
    }

    .card-value {
      font-size: 1.5rem;
      font-weight: 700;
    }

    #chart {
      width: 100%;
      height: 400px;
      margin-top: 50px;
    }
  </style>
</head>

<body>
  <nav class="navbar navbar-expand-lg navbar-light bg-white shadow-sm px-4">
    <img src="Word.png" alt="Logo Word" style="max-width: 8%; height: auto;">
    
    <div class="collapse navbar-collapse">
      <ul class="navbar-nav me-auto mb-2 mb-lg-0">
        <li class="nav-item"><a class="nav-link" href="Index.html"><i class="fas fa-chart-line"></i> Laporan</a></li>
        <li class="nav-item"><a class="nav-link" href="absen.html"><i class="fas fa-user-check"></i> Absen</a></li>
        <li class="nav-item"><a class="nav-link" href="pemasukan.html"><i class="fas fa-wallet"></i> Pemasukan</a></li>
        <li class="nav-item"><a class="nav-link" href="pengeluaran.html"><i class="fas fa-money-bill-wave"></i> Pengeluaran</a></li>
        <li class="nav-item"><a class="nav-link" href="asset.html"><i class="fas fa-box"></i> Assets</a></li>
        <li class="nav-item"><a class="nav-link" href="formulir.html"><i class="fas fa-clipboard"></i> Formulir</a></li>
        <li class="nav-item"><a class="nav-link" href="#"><i class="fas fa-check-circle"></i> Approval</a></li>
        <li class="nav-item"><a class="nav-link" href="pelanggan.html"><i class="fas fa-users"></i> Pelanggan</a></li>
      </ul>
      <a class="nav-link text-danger" href="login.html"><i class="fas fa-sign-out-alt"></i> Logout</a>
    </div>
  </nav>

 <div class="container mt-4">
  <div class="row g-3">
    <!-- Reusable Card -->
    <script>
      const laporan = JSON.parse(localStorage.getItem('laporan')) || {
        pemasukan: 7379333,
        pengeluaran: 6929333,
        assets: 2549000,
        pelanggan: 9,
        tetap: 1350000,
        mbps: 180,
        saldo: 450000
      };
    </script>

    <div class="mt-4">
  <h5><i class="fas fa-microphone"></i> Penyebutan Otomatis</h5>
  <p id="penyebutan" style="font-size: 16px; color: #333;"></p>
</div>

    <div class="col-md-4">
      <div class="card-box bg-success">
        <div class="card-title">Total Pemasukan</div>
        <input type="number" class="form-control mt-2" value="" id="pemasukan">
      </div>
    </div>
    <div class="col-md-4">
      <div class="card-box bg-danger">
        <div class="card-title">Total Pengeluaran</div>
        <input type="number" class="form-control mt-2" value="" id="pengeluaran">
      </div>
    </div>
    <div class="col-md-4">
      <div class="card-box bg-warning text-dark">
        <div class="card-title">Total Assets</div>
        <input type="number" class="form-control mt-2" value="" id="assets">
      </div>
    </div>
    <div class="col-md-4">
      <div class="card-box bg-primary">
        <div class="card-title">Total Pelanggan</div>
        <input type="number" class="form-control mt-2" value="" id="pelanggan">
      </div>
    </div>
    <div class="col-md-4">
      <div class="card-box bg-dark">
        <div class="card-title">Penghasilan Tetap</div>
        <input type="number" class="form-control mt-2" value="" id="tetap">
      </div>
    </div>
    <div class="col-md-4">
      <div class="card-box" style="background-color:#7b2cbf;">
        <div class="card-title text-white">Mbps Tersebar</div>
        <input type="number" class="form-control mt-2" value="" id="mbps">
      </div>
    </div>
    <div class="col-md-4">
      <div class="card-box bg-info text-dark">
        <div class="card-title">Saldo Akhir</div>
        <input type="number" class="form-control mt-2" value="" id="saldo">
      </div>
    </div>
    <div class="col-md-12 text-end">
      <button class="btn btn-primary mt-2" onclick="simpanLaporan()">Simpan Laporan</button>
    </div>
  </div>

  <!-- Chart Candlestick TradingView Style -->
  <div id="chart"></div>
</div>


    <!-- Chart Candlestick TradingView Style -->
    <div id="chart"></div>
  </div>

  <script>
    const chart = LightweightCharts.createChart(document.getElementById("chart"), {
      layout: {
        backgroundColor: '#f7f7f7',
        textColor: '#000',
      },
      grid: {
        vertLines: { color: '#eee' },
        horzLines: { color: '#eee' },
      },
      timeScale: {
        timeVisible: true,
        secondsVisible: false,
      },
    });


    const candleSeries = chart.addCandlestickSeries();

    // Simulasi data dinamis (bisa diganti dengan backend/API nantinya)
    candleSeries.setData([
      { time: '2025-07-01', open: 430000, high: 450000, low: 410000, close: 440000 },
      { time: '2025-07-02', open: 440000, high: 460000, low: 430000, close: 455000 },
      { time: '2025-07-03', open: 455000, high: 470000, low: 450000, close: 460000 },
      { time: '2025-07-04', open: 460000, high: 470000, low: 445000, close: 448000 },
      { time: '2025-07-05', open: 448000, high: 455000, low: 430000, close: 435000 },
      { time: '2025-07-06', open: 435000, high: 445000, low: 420000, close: 430000 },
      { time: '2025-07-07', open: 430000, high: 440000, low: 410000, close: 415000 },
    ]);
  </script>
  <script>
  // Tampilkan nilai awal
  window.onload = () => {
    document.getElementById('pemasukan').value = laporan.pemasukan;
    document.getElementById('pengeluaran').value = laporan.pengeluaran;
    document.getElementById('assets').value = laporan.assets;
    document.getElementById('pelanggan').value = laporan.pelanggan;
    document.getElementById('tetap').value = laporan.tetap;
    document.getElementById('mbps').value = laporan.mbps;
    document.getElementById('saldo').value = laporan.saldo;
  };

  function simpanLaporan() {
    const dataBaru = {
      pemasukan: parseInt(document.getElementById('pemasukan').value),
      pengeluaran: parseInt(document.getElementById('pengeluaran').value),
      assets: parseInt(document.getElementById('assets').value),
      pelanggan: parseInt(document.getElementById('pelanggan').value),
      tetap: parseInt(document.getElementById('tetap').value),
      mbps: parseInt(document.getElementById('mbps').value),
      saldo: parseInt(document.getElementById('saldo').value),
    };
    localStorage.setItem('laporan', JSON.stringify(dataBaru));
    alert('Data berhasil disimpan!');

    <div class="mt-4">
  <h5><i class="fas fa-microphone"></i> Penyebutan Otomatis</h5>
  <p id="penyebutan" style="font-size: 16px; color: #333;"></p>
</div>
  }
</script>
<script>
  function updatePenyebutan() {
    const data = JSON.parse(localStorage.getItem('laporan')) || {};
    const kalimat = `Total pemasukan bulan ini adalah Rp ${data.pemasukan?.toLocaleString() || 0} dan pengeluaran sebesar Rp ${data.pengeluaran?.toLocaleString() || 0}, sehingga saldo akhir adalah Rp ${data.saldo?.toLocaleString() || 0}.`;
    document.getElementById('penyebutan').innerText = kalimat;
  }

  window.onload = () => {
    const laporan = JSON.parse(localStorage.getItem('laporan')) || {};
    document.getElementById('pemasukan').value = laporan.pemasukan || 0;
    document.getElementById('pengeluaran').value = laporan.pengeluaran || 0;
    document.getElementById('assets').value = laporan.assets || 0;
    document.getElementById('pelanggan').value = laporan.pelanggan || 0;
    document.getElementById('tetap').value = laporan.tetap || 0;
    document.getElementById('mbps').value = laporan.mbps || 0;
    document.getElementById('saldo').value = laporan.saldo || 0;
    updatePenyebutan();
  };

  function simpanLaporan() {
    const dataBaru = {
      pemasukan: parseInt(document.getElementById('pemasukan').value),
      pengeluaran: parseInt(document.getElementById('pengeluaran').value),
      assets: parseInt(document.getElementById('assets').value),
      pelanggan: parseInt(document.getElementById('pelanggan').value),
      tetap: parseInt(document.getElementById('tetap').value),
      mbps: parseInt(document.getElementById('mbps').value),
      saldo: parseInt(document.getElementById('saldo').value),
    };
    localStorage.setItem('laporan', JSON.stringify(dataBaru));
    updatePenyebutan();
    alert('Data berhasil disimpan!');
  }
</script>
</body>

</html>
